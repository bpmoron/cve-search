[Unit]
Description=circl dot lu CVE-Search Web Server
Requires=mongod.service
After=network.target cvesearch.db_init.service cvesearch.db_repopulate.service mongod.service
Documentation=https://cve-search.github.io/cve-search/webgui/webgui.html

[Service]
WorkingDirectory=/opt/cve/cve-search
# Set PATH variable to search 'venv' directory first.
Environment="PATH=/opt/cve/cve-env/bin:$PATH"
ExecStart=python3 web/index.py
# Other option is to use 'full path' to python3 binary created within "venv/bin" directory.
# ExecStart=/opt/cve/cve-env/bin/python3 web/index.py
User=cve
Type=simple
SyslogIdentifier=cvesearch.web
Restart=always
RestartSec=5
MemoryHigh=2G
MemoryMax=3G

[Install]
WantedBy=multi-user.target
